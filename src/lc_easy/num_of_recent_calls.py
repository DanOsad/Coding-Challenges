# https://leetcode.com/problems/number-of-recent-calls (QUEUE)

# You have a RecentCounter class which counts the number of recent requests within a certain time frame.

# Implement the RecentCounter class:

# RecentCounter() Initializes the counter with zero recent requests.
# int ping(int t) Adds a new request at time t, where t represents some time in milliseconds, and returns the number of requests that has happened in the past 3000 milliseconds (including the new request). Specifically, return the number of requests that have happened in the inclusive range [t - 3000, t].
# It is guaranteed that every call to ping uses a strictly larger value of t than the previous call.

# Example 1:

# Input
# ["RecentCounter", "ping", "ping", "ping", "ping"]
# [[], [1], [100], [3001], [3002]]
# Output
# [null, 1, 2, 3, 3]

# Explanation
# RecentCounter recentCounter = new RecentCounter();
# recentCounter.ping(1);     // requests = [1], range is [-2999,1], return 1
# recentCounter.ping(100);   // requests = [1, 100], range is [-2900,100], return 2
# recentCounter.ping(3001);  // requests = [1, 100, 3001], range is [1,3001], return 3
# recentCounter.ping(3002);  // requests = [1, 100, 3001, 3002], range is [2,3002], return 3
 

# Constraints:

# 1 <= t <= 109
# Each test case will call ping with strictly increasing values of t.
# At most 104 calls will be made to ping.

class RecentCounter:
    def __init__(self):
        self.max_time = 3000
        self.requests = []

    def ping(self, t):
        """ Optimized: Using deque at the front of the queue is a constant time operation """
        self.requests.append(t)
        start_time = t - self.max_time
        while self.requests[0] < start_time:
            self.requests.pop(0)

        return len(self.requests)


if __name__ == "__main__":
        testcase = [[],[2379],[3020],[3102],[4148],[5395],[6915],[6980],[7460],[8679],[9476],[10326],[14165],[16213],[16267],[17260],[17957],[19643],[19775],[20922],[20949],[21473],[21570],[22156],[22349],[23383],[24745],[25951],[27667],[29293],[29952],[30977],[34943],[36429],[36956],[37342],[39548],[40759],[41858],[45732],[47307],[49337],[49703],[50726],[51142],[54413],[55568],[55650],[62319],[62784],[64148],[65092],[65317],[67791],[67970],[69559],[69809],[71156],[71347],[71653],[75399],[76206],[76516],[76550],[76817],[76862],[79057],[79447],[79546],[79871],[81158],[81290],[81605],[82455],[82637],[83252],[83633],[85439],[85671],[85775],[85984],[90064],[90546],[94204],[94256],[95035],[98049],[100136],[100504],[101407],[101542],[103961],[108344],[108413],[111432],[113002],[113940],[115041],[115366],[118345],[118998],[119192],[119571],[119849],[120069],[120231],[121299],[122608],[125474],[126579],[127166],[131203],[132872],[134992],[137973],[138147],[138338],[140366],[140515],[141748],[142711],[145169],[147392],[147715],[149802],[150534],[150561],[151293],[151887],[152268],[153726],[153926],[154503],[155454],[156457],[156673],[157103],[158187],[158561],[159566],[159995],[160877],[161655],[161784],[161867],[163177],[164624],[164850],[166065],[166312],[167617],[169291],[172608],[172736],[173484],[173793],[174423],[175388],[175724],[175948],[175961],[177664],[178132],[179658],[183271],[184483],[184644],[184685],[184850],[185715],[186342],[192459],[194398],[194641],[194984],[195128],[195172],[195567],[196245],[196929],[197220],[197379],[198067],[199685],[200106],[201507],[203746],[204759],[207084],[211324],[211956],[212928],[215159],[215256],[215787],[216086],[216857],[217119],[218429],[221159],[222180],[222976],[223643],[223776],[224307],[224488],[227407],[227920],[227940],[228120],[229254],[229792],[230540],[230788],[231591],[233457],[234004],[237492],[238188],[239679],[241986],[244007],[245762],[247583],[248570],[249064],[251016],[251737],[252046],[252179],[256546],[257077],[260242],[262898],[263071],[263189],[263429],[264149],[265114],[265587],[265887],[266732],[267891],[267943],[268219],[268422],[268784],[269535],[269963],[272900],[273733],[273894],[274226],[274285],[275338],[277142],[282445],[282909],[283127],[283306],[284715],[285226],[286452],[286528],[286694],[287408],[288072],[288420],[289735],[290350],[290537],[293080],[293242],[295278],[295445],[298648],[298790],[301753],[302525],[303434],[305467],[314748],[314902],[315577],[315732],[316164],[317150],[318470],[319123],[321962],[322808],[325611],[326114],[327523],[328825],[329886],[331717],[332154],[333699],[333800],[335467],[337090],[337204],[339367],[341062],[341272],[342885],[344456],[345560],[346705],[346782],[350006],[353932],[358707],[361473],[362870],[363629],[365490],[366015],[366926],[372239],[372501],[372715],[374633],[374737],[376473],[376537],[377785],[379078],[380619],[382107],[382134],[382341],[382392],[382451],[382914],[385853],[389536],[389808],[389880],[390435],[391546],[391825],[392592],[398946],[399553],[402309],[402468],[405253],[405504],[405628],[405636],[405826],[406297],[406457],[407191],[408888],[409198],[409565],[411981],[412106],[413680],[414348],[414769],[415431],[416172],[416821],[418570],[419147],[419828],[422021],[423035],[423756],[424498],[426086],[429815],[429837],[430208],[431468],[432511],[432978],[433038],[433174],[433379],[434037],[434158],[434333],[435000],[436345],[436543],[439973],[443101],[443376],[443467],[445576],[450072],[450912],[451278],[451404],[452975],[452983],[455666],[456151],[456226],[456892],[456898],[459191],[460829],[462071],[462206],[462991],[463459],[463793],[463944],[464919],[465297],[465918],[466491],[467389],[467729],[469021],[471930],[473199],[473963],[474129],[475026],[478443],[479244],[479945],[480079],[480826],[480894],[482618],[483397],[483663],[485205],[485855],[490791],[491475],[492364],[492705],[492998],[494202],[494281],[499374],[501637],[503066],[503457],[503751],[504753],[505231],[506593],[506719],[510172],[511722],[512400],[512862],[513305],[513402],[513757],[515834],[516687],[517018],[517099],[517210],[518576],[519591],[519959],[520006],[520159],[520543],[523189],[523743],[526667],[526850],[528624],[529663],[530089],[533836],[534722],[534743],[534836],[535450],[536034],[537066],[537297],[539622],[540246],[542169],[542453],[544281],[544364],[545018],[545321],[546831],[547775],[548504],[549050],[552678],[554697],[554766],[554792],[555610],[555659],[556010],[557456],[557535],[557876],[558959],[560231],[560251],[561866],[561963],[562023],[562852],[563136],[564938],[568119],[569530],[571461],[571863],[573691],[573786],[574196],[575046],[575338],[575904],[575935],[580016],[580246],[581900],[582442],[582748],[583321],[586703],[587198],[588655],[588818],[589084],[589574],[590163],[591156],[591438],[591480],[592909],[594276],[595063],[599648],[600361],[601276],[601482],[602506],[603039],[604277],[605461],[605979],[606469],[607313],[607459],[607689],[609039],[611919],[615482],[622376],[623241],[623737],[624208],[626435],[627813],[630807],[633287],[635544],[636249],[637086],[638566],[638667],[639912],[640169],[641865],[642597],[642962],[643015],[643228],[643421],[643621],[644146],[646902],[648219],[648661],[650212],[651086],[654737],[655028],[655601],[656064],[657074],[662897],[664041],[664138],[665838],[666449],[666812],[667086],[667517],[667824],[670920],[671599],[672170],[673682],[676368],[676461],[677880],[678521],[679448],[680624],[682842],[684340],[685215],[686680],[687316],[687909],[688255],[690508],[690641],[693036],[694134],[694609],[696010],[696493],[696709],[697463],[698237],[698831],[699122],[699904],[700300],[701659],[702489],[703758],[703988],[706851],[707052],[708031],[708517],[708839],[708941],[709969],[711486],[712018],[714840],[715909],[716146],[717016],[717808],[718681],[719114],[720665],[720924],[721486],[722599],[726767],[727521],[730125],[730229],[730789],[730816],[731357],[731517],[732691],[732699],[733612],[734076],[736792],[737303],[737669],[742538],[743754],[744330],[748442],[748574],[749390],[750606],[753286],[754223],[755840],[755842],[758034],[759039],[760643],[761358],[761771],[762684],[763392],[763456],[763886],[765085],[771007],[772542],[772968],[772987],[774442],[775317],[775513],[775713],[776204],[776354],[780025],[780537],[782437],[782648],[783330],[783341],[785600],[788027],[788608],[788901],[789547],[794196],[794547],[795752],[797246],[799381],[799937],[800470],[800522],[801299],[802320],[802450],[803748],[804856],[806438],[808068],[809018],[811053],[811231],[812281],[815125],[815580],[816032],[816733],[817836],[818996],[819459],[822167],[824809],[825111],[826055],[826402],[828729],[829754],[829776],[830954],[831361],[832827],[834016],[835530],[835873],[835880],[836590],[837008],[837846],[839073],[839169],[840721],[841784],[842427],[843430],[845372],[848241],[848417],[850123],[851444],[851952],[852023],[852422],[853648],[854041],[854106],[854471],[855284],[859545],[859708],[860162],[860171],[861722],[862137],[863156],[864163],[866174],[866581],[870395],[872013],[872972],[873093],[873975],[875197],[880660],[888124],[888329],[889953],[892465],[892958],[893516],[894364],[897136],[897900],[899307],[900335],[902134],[903310],[903340],[903541],[903723],[904058],[904963],[905106],[905493],[911214],[911813],[912876],[914253],[914394],[916269],[917703],[919735],[921426],[921984],[922400],[923691],[923932],[924877],[927742],[927907],[929379],[929476],[929543],[930580],[932416],[934481],[936582],[938780],[939081],[939570],[940446],[940549],[941116],[943285],[947255],[948044],[949128],[950666],[951143],[952541],[952680],[953012],[954015],[954086],[954691],[955831],[956178],[956811],[958425],[959442],[959732],[963413],[965262],[965643],[966757],[967140],[967595],[967993],[968483],[969771],[971115],[972771],[973225],[974032],[974185],[975103],[975262],[976490],[978097],[979388],[979735],[980202],[981000],[983554],[986661],[987309],[987849],[990414],[992197],[994419],[994840],[994993],[995318],[995327],[995401],[997966],[998139],[998204]]


        # testcase = [[],[2379],[3020],[3102],[4148],[5395],[6915],[6980],[7460]]
        # testcase = [[],[1],[100],[3001],[3002]]
        recent_counter = None
        for ping in testcase:
            if not len(ping):
                recent_counter = RecentCounter()
            else:
                recent_counter.ping(ping[0])

        
